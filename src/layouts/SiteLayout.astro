---
import "../styles/global.css";
import { theme } from "../config/theme.js";

const { title = "Services TI – EÉSAD" } = Astro.props;

// Read colors from theme with hard fallbacks
const bg = theme?.colors?.background ?? "#020617"; // slate-950
const text = theme?.colors?.text ?? "#e5e7eb";      // slate-200
const accent = theme?.colors?.accent ?? "#38bdf8";  // sky-400
const border = theme?.colors?.border ?? "#1f2937";  // slate-800

// Band + wave colors
const bandBg = theme?.colors?.bandBackground ?? "#020617";
const waveFill = theme?.colors?.waveFill ?? "#020617";
---

<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>

    
    <!-- Cloudflare Web Analytics -->
    <script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "de4731804e7e4d87b54f22a43d2b11b4"}'></script>
    <!-- End Cloudflare Web Analytics -->

    <style>
      :root {{
        --band-bg: {bandBg};
        --wave-fill: {waveFill};
      }}
    </style>
  </head>

  <!-- Inline styles -->
  <body
    class="min-h-screen"
    style={`background-color: ${bg}; color: ${text};`}
  >
    <div class="min-h-screen flex flex-col">

      <!-- HEADER -->
      <header class="pt-12 pb-8 text-center relative">
        <div class="relative mx-auto flex flex-col items-center gap-3 z-10">
          <slot name="header" />
        </div>
      </header>

      <!-- HERO -->
      <section class="mx-auto max-w-4xl px-4 text-center relative z-10">
        <slot name="hero" />
      </section>

      <!-- PAGE CONTENT -->
      <div class="flex-1">
        <slot />
      </div>

      <!-- FOOTER -->
      <footer
        class="mt-auto border-t relative"
        style={`border-color: ${border};`}
      >
        <div
          class="absolute inset-x-0 -top-px h-[2px]"
          style={`background: linear-gradient(
            to right,
            transparent,
            ${accent},
            transparent
          );`}
        ></div>

        <div class="mx-auto max-w-6xl px-4 py-6 text-xs text-slate-500">
          © {new Date().getFullYear()} — Services TI · EÉSAD
        </div>
      </footer>

    </div>
  </body>
</html>
