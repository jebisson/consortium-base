---
import SiteLayout from "../layouts/SiteLayout.astro";
import logo from "../assets/eesad-logo.png";
import { theme } from "../config/theme.js";

const { bandBackground, waveFill, glowColor } = theme.colors;
---

<SiteLayout title="Services TI – EÉSAD">

  <!-- HEADER SLOT -->
  <div slot="header">
    <img src={logo.src} alt="EÉSAD" class="h-20 w-auto" />
    <h1 class="text-sm tracking-[0.25em] text-slate-400 uppercase">
      Services TI
    </h1>
  </div>

  <!-- HERO SLOT -->
  <div slot="hero" class="relative">
    {/* HERO GLOW */}
    <div
      class="absolute left-1/2 top-12 -translate-x-1/2
             w-[70%] md:w-[60%] h-24
             bg-blue-400/30 blur-[70px] opacity-80">
    </div>

    <h2 class="text-3xl md:text-4xl font-semibold tracking-tight text-slate-100">
      Sécurité, modernisation et accompagnement TI
    </h2>

    <p class="mt-3 text-base md:text-md text-slate-200">
      Une porte d’entrée unique vers nos services TI : vision globale de la
      sécurité Microsoft 365 et questionnaire pour dresser le portrait de
      votre environnement.
    </p>
  </div>

  {/* BAND WITH WAVE + CARDS */}
  <main class="mt-5">
    <section
      class="relative w-full overflow-hidden -mt-20"
      style={`background-color: ${bandBackground};`}
    >

      <div
        class="absolute top-40 left-0 right-0 mx-auto w-[90%] h-40 blur-3xl z-0"
        style={`background-color: ${glowColor};`}
      ></div>

      {/* WAVE */}
      <svg
        viewBox="0 0 1440 320"
        preserveAspectRatio="none"
        class="pointer-events-none absolute top-0 left-0 w-full h-96 z-0"
        aria-hidden="true"
        style={`color: ${waveFill};`}
      >
        <path
          fill="currentColor"
          d="
            M0,220
            C240,140 480,300 720,220
            C960,140 1200,300 1440,220
            L1440,0 L0,0 Z
          "
        />
      </svg>

      {/* Light gradient over the band */}
      <div
        class="absolute inset-0 bg-gradient-to-b
               from-transparent to-slate-950/40 z-0">
      </div>

      {/* SECTION TITLE */}
      <h3
        class="relative z-20 text-center text-slate-400
               text-sm uppercase tracking-[0.25em] mt-28 mb-8">
        Services offerts et ressources
      </h3>

      {/* Ambient glow behind cards */}
      <div
        class="absolute left-1/2 top-48 -translate-x-1/2 w-[70%] h-32
               bg-blue-500/5 blur-3xl rounded-full z-0">
      </div>

      {/* CARDS GRID */}
      <div class="relative z-20 mx-auto max-w-6xl px-4 pb-20">

        {/* IMPORTANT: removed md:grid-rows-2 so grid can grow */}
        <section class="grid gap-8 md:grid-cols-3">

          {/* PROMO – spans 3 cards */}
          <a
            href="/promo-30h"
            class="group relative overflow-hidden rounded-2xl
                   border border-slate-600/60
                   bg-slate-900/80
                   p-8 md:p-10 shadow-md transition-all duration-300
                   hover:-translate-y-2 hover:scale-[1.01]
                   hover:border-sky-400/80 hover:shadow-sky-500/30
                   md:col-span-3"
          >
            {/* “Network” background (CSS only) 
           <div
            class="absolute inset-0"
            style="background:
                  radial-gradient(800px 260px at 20% 30%, rgba(56,189,248,.35), transparent 60%),
                  radial-gradient(700px 240px at 80% 20%, rgba(99,102,241,.25), transparent 55%),
                  linear-gradient(to bottom right, #020617, #020617cc);
                  "
          ></div>*/}


            {/* Dots overlay 
            <div
              class="pointer-events-none absolute inset-0 opacity-30"
              style={`background-image:
                radial-gradient(circle at 12px 12px, rgba(255,255,255,.35) 1px, transparent 2px);
                background-size: 26px 26px;`}
            ></div>*/}

            <!-- Image background -->
            <div
              class="absolute inset-0 bg-cover bg-center"
              style="background-image:url('/images/promo-network.jpg')"
            ></div>

           <!-- Dark overlay -->
            <div class="absolute inset-0 bg-slate-950/80"></div>

          <!-- Optional gradient for depth -->
            <div class="absolute inset-0 bg-gradient-to-b from-slate-900/30 to-slate-950/50"></div>


            {/* Hover tint */}
            <div
              class="pointer-events-none absolute inset-0
                     bg-gradient-to-br from-sky-500/0 via-sky-500/0 to-sky-500/20
                     opacity-0 transition-opacity duration-300
                     group-hover:opacity-100"
            ></div>

            <div class="relative flex flex-col md:flex-row md:items-center md:justify-between gap-6">
              <div class="max-w-3xl">
                <p class="text-xs uppercase tracking-[0.25em] text-slate-300/90">
                  Promo limitée
                </p>

                <h3 class="mt-2 text-2xl md:text-3xl font-extrabold text-slate-100">
                  50% de rabais sur une banque de <span class="text-sky-300">30 heures</span> de soutien technique
                </h3>

                <p class="mt-3 text-slate-200/90 text-sm md:text-base leading-relaxed">
                  Idéal pour stabiliser votre environnement, accélérer les demandes et planifier vos améliorations.
                  Applicable selon l’entente (portée, période et modalités).
                </p>

                <div class="mt-5 flex flex-wrap items-center gap-3">
                  <span class="inline-flex items-center rounded-full bg-white/10 border border-white/15 px-3 py-1 text-xs text-slate-100">
                    Banque : 30h
                  </span>
                  <span class="inline-flex items-center rounded-full bg-white/10 border border-white/15 px-3 py-1 text-xs text-slate-100">
                    Rabais : 50%
                  </span>
                  <span class="inline-flex items-center rounded-full bg-white/10 border border-white/15 px-3 py-1 text-xs text-slate-100">
                    Interventions / soutien
                  </span>
                </div>
              </div>

              <div class="shrink-0">
                <span
                  class="inline-flex items-center justify-center
                         rounded-xl px-6 py-3 font-semibold
                         bg-gradient-to-r from-sky-400 to-indigo-400
                         text-slate-900
                         group-hover:brightness-110 transition"
                >
                  Profiter de l’offre →
                </span>
              </div>
            </div>
          </a>

          {/* CARD 1 */}
          <a
            href="/securite365"
            class="group relative overflow-hidden rounded-2xl
                   border border-slate-600/60
                   bg-gradient-to-b from-slate-800 to-slate-600
                   p-6 shadow-md transition-all duration-300
                   hover:-translate-y-2 hover:scale-[1.02] hover:rotate-[0.2deg]
                   hover:border-sky-400/80 hover:shadow-sky-500/30"
          >
            <div class="relative flex h-44 flex-col justify-between">
              <div>
                <h3 class="mb-2 text-xl font-semibold flex items-center gap-2">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-10 h-10 text-sky-300 opacity-80 group-hover:opacity-100 transition"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="1.5"
                      d="M9 12.75L11.25 15 15 9.75m-3-6.042a48.42 48.42 0 00-6 2.558A2.25
                         2.25 0 005.25 8.91v4.819a6.75 6.75 0 003.022 5.625l3.095
                         2.06a.75.75 0 00.816 0l3.095-2.06a6.75 6.75 0 003.022-5.625V8.91a2.25
                         2.25 0 00-1.25-2.132 48.42 48.42 0 00-6-2.558z"
                    />
                  </svg>
                  Sécurité Microsoft 365
                </h3>
                <p class="text-sm text-slate-200">
                  Faites de la cybersécurité un réflexe quotidien.<br />
                  Sécurité et résilience numérique avec Microsoft 365.
                </p>
              </div>

              <span
                class="mt-4 inline-flex items-center text-sm font-medium
                       text-sky-300 group-hover:text-sky-100"
              >
                Voir la page →
              </span>
            </div>
          </a>

          {/* CARDS 2–5 GENERATED */}
          {[
            {
              title: "Sauvegarde Microsoft 365",
              desc: "Protection complète des courriels, fichiers et Teams.",
              link: "/sauvegarde365",
              icon: `
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                  d="M12 16.5v-9m0 9l-3-3m3 3l3-3m-.75-6.75a4.5 4.5 0
                      00-8.456 1.09A3.75 3.75 0 006
                      13.5h12a3.75 3.75 0 00.206-7.464A4.501 4.501 0
                      0012.75 6.75z" />
              `,
            },
            {
              title: "Gestion TI proactive",
              desc: "Supervision 24/7, protection avancée et support rapide pour assurer la stabilité, la sécurité et réduire les couts de vos opérations.",
              link: "/rmm-edr-kaseya365",
              icon: `
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                  d="
                    M12 3l7 3.5v5.5c0 4.5-3 8.5-7 9.5
                      -4-1-7-5-7-9.5V6.5L12 3z
                       M12 11a2 2 0 110 4 2 2 0 010-4z
                    "
                />
              `,
            },
            {
              title: "Guide pratique employé",
              desc: "Guide essentiel pour les bonnes pratiques numériques.",
              link: "/guide-employe",
              icon: `
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                  d="M3.75 4.5L12 8.25l8.25-3.75v12.75L12 21.75l-8.25-3.75V4.5z" />
              `,
            },
            {
              title: "Service conseil TI",
              desc: "Pour les membres du réseau EÉSAD : vérification de soumissions, consultation et recommandations.",
              link: "/service-conseil",
              icon: `
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                  d="M11.25 3.75a7.5 7.5 0 105.303 12.803l3.697 3.697M8.25 11.25h6" />`
            },
          ].map((s) => (
            <a
              href={s.link}
              class="group relative overflow-hidden rounded-2xl
                     border border-slate-600/60
                     bg-gradient-to-b from-slate-900 to-slate-800
                     p-6 shadow-md transition-all duration-300
                     hover:-translate-y-2 hover:scale-[1.02] hover:rotate-[0.2deg]
                     hover:border-sky-400/80 hover:shadow-sky-500/30"
            >
              <div
                class="pointer-events-none absolute inset-0
                       bg-gradient-to-br from-sky-500/0 via-sky-500/0 to-sky-500/20
                       opacity-0 transition-opacity duration-300
                       group-hover:opacity-100"
              ></div>

              <div class="relative flex h-44 flex-col justify-between">
                <div>
                  <h3 class="mb-2 text-xl font-semibold flex items-center gap-2">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="w-10 h-10 text-sky-300 opacity-80 group-hover:opacity-100 transition"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                      set:html={s.icon}
                    >
                    </svg>
                    {s.title}
                  </h3>
                  <p class={`text-slate-200 text-sm ${s.descClass || ""}`}>
                    {s.desc}
                  </p>
                </div>
                <span
                  class="mt-4 inline-flex items-center text-sm text-sky-300 font-medium group-hover:text-sky-100"
                >
                  {s.link !== "#" ? "Voir la page →" : "Bientôt disponible"}
                </span>
              </div>
            </a>
          ))}

          {/* CTA BLUE CARD */}
          <a
            href="/survey"
            class="group relative overflow-hidden rounded-2xl
                   border border-blue-600 bg-blue-600
                   p-6 shadow-md transition-all duration-300
                   hover:-translate-y-2 hover:scale-[1.02] hover:rotate-[0.2deg]
                   hover:border-blue-400 hover:bg-blue-500
                   hover:shadow-blue-500/40"
          >
            <div
              class="pointer-events-none absolute inset-0
                     bg-gradient-to-br from-white/10 via-blue-400/20 to-blue-700/40
                     opacity-0 transition-opacity duration-300
                     group-hover:opacity-100"
            ></div>

            <div class="relative flex h-44 flex-col justify-between">
              <div>
                <h3 class="mb-2 text-xl font-semibold">Questionnaire TI</h3>
                <p class="text-sm text-blue-50">
                  Répondez à quelques questions pour dresser le portrait de
                  votre environnement informatique et mieux cibler nos
                  recommandations.
                </p>
              </div>

              <span class="mt-4 inline-flex items-center text-sm font-medium text-white">
                Remplir le questionnaire →
              </span>
            </div>
          </a>

        </section>
      </div>
    </section>
  </main>
</SiteLayout>
